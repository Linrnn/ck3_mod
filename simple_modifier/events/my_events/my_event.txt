namespace = my_events

my_events.1 = {
	type = character_event

	option = {
		name = "角色修正"
		add_character_modifier = 主的庇佑
		add_character_modifier = 主的吹拂
		#remove_character_modifier = has_recently_changed_laws_modifier
	}
	option = {
		name = "领地修正（慎重，建筑槽位的修改是不可逆的）"
		every_county = {
			if = {
				limit = {
					holder = {
						is_ai = no
					}
				}
				add_county_modifier = 主的恩赐
				every_county_province = {
					add_province_modifier = 主的洗礼
				}
			}
			# if = {
			# 	limit = {
			# 		holder = {
			# 			is_ai = yes
			# 		}
			# 		has_county_modifier = 主的恩赐
			# 	}
			# 	remove_county_modifier = 主的恩赐
			# 	every_county_province = {
			# 		add_building_slot = -10
			# 		remove_province_modifier = 主的洗礼
			# 	}
			# }
			# else_if = {
			# 	limit = {
			# 		holder = {
			# 			is_ai = no
			# 		}
			# 	}
			# 	add_county_modifier = 主的恩赐
			# 	every_county_province = {
			# 		add_province_modifier = 主的洗礼
			# 	}
			# }
		}
	}
	option = {
		name = "宝物修正"
		every_character_artifact = {
			my_remove_artifact_negative_modifier_group_effect = { modifier_group = artifact_prowess }									# 勇武
			my_remove_artifact_negative_modifier_group_effect = { modifier_group = artifact_monthly_prestige_penalty_modifier }			# 威望
			# my_remove_artifact_modifier_group_effect = { modifier_group = artifact_short_reign_duration_mult }						# 短暂统治持续时间
			# my_remove_artifact_modifier_group_effect = { modifier_group = artifact_dread_baseline_add }								# 自然恐怖值
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_learning_1_modifier }								# 学识
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_monthly_minor_prestige_1_modifier }					# 威望
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_monthly_piety_1_modifier }							# 虔诚
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_prowess_1_modifier }									# 勇武
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_knight_effectiveness_1_modifier }					# 骑士战斗力

			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_court_grandeur_baseline_add }						# 宫廷显赫度
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_knight_limit }										# 骑士数量
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_placeholder_modifier }								# 威望
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_monthly_prestige_mult }								# 每月威望
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_monthly_piety_gain_mult }							# 每月虔诚

			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_owned_scheme_secrecy_add }							# 计谋隐秘度
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_hostile_scheme_phase_duration_add }					# 阴谋速度
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_personal_scheme_phase_duration_add }					# 私人计谋速度
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_courting_scheme_phase_duration_add }					# 求爱阶段长度
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_learn_language_scheme_phase_duration_add }			# 学习语言阶段长度
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_owned_personal_scheme_success_chance_add }			# 私人计谋的初始成功概率

			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_development_growth }									# 发展度增长
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_enemy_hard_casualty_modifier }						# 敌方伤亡修正
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_controlled_province_advantage }						# 受控领土防御优势
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_men_at_arms_maintenance }							# 兵士维护费降低
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_mercenary_hire_cost_mult }							# 佣兵雇佣花费
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_build_gold_cost }									# 建造花费降低
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_domain_tax_same_faith_mult }							# 直辖领地赋税（同信仰）
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_domain_tax_mult }									# 直辖领地赋税
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_vassal_tax_contribution_mult }						# 封臣的赋税贡献
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_church_holding_build_gold_cost }						# 圣殿地产/建造的建造花费
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_pursue_efficiency }									# 追击效率
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_archer_cavalry_screen_add }							# 弓骑兵掩护
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_legitimacy_gain_mult }								# 正统性获得
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_monthly_tyranny }									# 暴政减少值
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_dread_gain_mult }									# 恐怖值增加值
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_stress_gain }										# 压力增加值
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_monthly_prestige_gain_per_knight_add }				# 每位骑士给予的威望
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_monthly_piety_gain_per_knight_add }					# 每位骑士给予的虔诚
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_monthly_piety_gain_per_happy_powerful_vassal_add }	# 每位在内阁任职的强力封臣使虔诚

			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_attraction_opinion }									# 吸引好感度
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_independent_ruler_opinion }							# 独立统治者好感
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_spouse_opinion_add }									# 配偶好感
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_clergy_opinion }										# 神职人员好感度
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_dynasty_opinion }									# 宗族好感度
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_same_faith_opinion }									# 相同信仰角色对其的好感度
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_different_faith_opinion }							# 不同信仰角色对其的好感度

			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_diplomacy_per_prestige_level_modifier }				# 每级威望等级使外交
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_learning_per_prestige_level_modifier }				# 每级威望等级使学识
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_learning_per_piety_level_modifier }					# 每级奉献等级使学识
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_stewardship_per_stress_level }						# 每级压力等级使管理

			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_trait_track_hunter_xp_gain_mult }					# 猎手特质经验获取
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_monthly_martial_lifestyle_xp }						# 每月军事生活方式的经验值
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_monthly_stewardship_lifestyle_xp }					# 每月管理生活方式的经验值
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_monthly_intrigue_lifestyle_xp }						# 每月谋略生活方式的经验值
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_monthly_learning_lifestyle_xp }						# 每月学识生活方式的经验值

			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_happy_powerful_vassal_tax_contribution_mult }		# 强力封臣内阁成员税收贡献
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_courtly_tax_contribution_mult }						# 宫廷礼制封臣税收贡献
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_parochial_tax_contribution_mult }					# 本乡本土封臣赋税贡献
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_zealot_tax_contribution_mult }						# 宗教狂热封臣赋税贡献
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_glory_hound_tax_contribution_mult }					# 追名逐利封臣赋税贡献
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_belligerent_tax_contribution_mult }					# 尚武好斗封臣赋税贡献

			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_courtier_and_guest_opinion }							# 廷臣与宾客好感
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_powerful_vassal_opinion }							# 强力封臣好感
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_courtly_vassal_opinion }								# 宫廷礼制封臣好感
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_parochial_vassal_opinion }							# 本乡本土封臣好感
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_zealot_vassal_opinion }								# 宗教狂热封臣好感
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_glory_hound_vassal_opinion }							# 追名逐利封臣好感
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_belligerent_vassal_opinion }							# 尚武好斗封臣好感度

			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_courtly_levy_contribution_mult }						# 宫廷礼制封臣征召兵基础贡献
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_parochial_levy_contribution_mult }					# 本乡本土封臣征召兵基础贡献
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_zealot_levy_contribution_mult }						# 宗教狂热封臣征召兵基础贡献
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_glory_hound_levy_contribution_mult }					# 追名逐利封臣征召兵基础贡献
			my_remove_artifact_modifier_group_effect = { modifier_group = artifact_belligerent_levy_contribution_mult }					# 尚武好斗封臣征召兵基础贡献
		}
		# every_artifact = {
		# 	if = {
		# 		limit = {
		# 			artifact_owner = ROOT
		# 		}
		# 	}
		# 	# copy_artifact_modifiers
		# 	# remove_artifact_modifier
		# }
	}
	option = {
		name = "角色特质（原版）"
		add_trait = saoshyant	# 萨奥希扬特
		add_trait = sayyid		# 赛义德/赛义达
		add_trait = paragon		# 典范
		add_trait = savior		# 救主
		add_trait = witch		# 巫师
	}
	option = {
		name = "家族修正（原版）"
		house = {
			add_house_modifier = witch_coven				# 巫师集会
		}
	}
	option = {
		name = "宗族修正（原版）"
		dynasty = {
			add_dynasty_modifier = dynasty_of_many_crowns	# 众王之族
			add_dynasty_modifier = strong_blood				# 强大的血脉
		}
	}
	option = {
		name = "文化修正（没有提示是正常的）"
		culture = {
			remove_variable = tradition_cooldown			# 传统冷却
			#has_variable  = tradition_cooldown
		}
	}
	option = {
		name = "退出"
	}
}

my_events.2 = {
	type = character_event

	option = {
		name = "金钱"
		add_gold = 10000
	}
	option = {
		name = "威望"
		add_prestige = 1000
	}
	option = {
		name = "虔诚"
		add_piety = 1000
	}
	option = {
		name = "影响力"
		change_influence = {
			value = 100
			multiply = 10
		}
	}
	option = {
		name = "宗族威望"
		dynasty = {
			add_dynasty_prestige = 10000
		}
	}
	option = {
		name = "正统性"
		add_legitimacy = 100
	}
	option = {
		name = "压力"
		add_stress = -100
	}
	option = {
		name = "恐怖值"
		add_dread = 100
	}
	# option = {
	# 	name = "ai_资源"
	# 	every_ruler = {
	# 		if = {
	# 			limit = {
	# 				is_ai = yes
	# 				gold > 100
	# 			}
	# 			remove_short_term_gold = 100
	# 		}

	# 		if = {
	# 			limit = {
	# 				is_ai = yes
	# 				prestige > 100
	# 			}
	# 			add_prestige = -100
	# 		}
	# 	}
	# }
	option = {
		name = "退出"
	}
}

my_events.3 = {
	type = character_event

	option = {
		name = "长嗣继承法"
		# primary_title = {
		# 	add_title_law = single_heir_succession_law
		# 	add_title_law_effects = single_heir_succession_law_youngest
		# }
		culture = {
			add_innovation = innovation_primogeniture
		}
	}
	option = {
		name = "本地文化"
		convert_family_culture_and_notify_vassals_effect = {
			CONVERTER = root
			OLD_CULTURE = root.culture
			NEW_CULTURE = capital_province.culture
		}
	}
	option = {
		name = "斯堪的纳维亚"
		convert_family_culture_and_notify_vassals_effect = {
			CONVERTER = root
			OLD_CULTURE = root.culture
			NEW_CULTURE = culture:norse
		}
	}
	option = {
		name = "伊比利亚"
		convert_family_culture_and_notify_vassals_effect = {
			CONVERTER = root
			OLD_CULTURE = root.culture
			NEW_CULTURE = culture:castilian
		}
	}
	option = {
		name = "伊朗"
		convert_family_culture_and_notify_vassals_effect = {
			CONVERTER = root
			OLD_CULTURE = root.culture
			NEW_CULTURE = culture:persian
		}
	}
	option = {
		name = "退出"
	}
}

my_events.4 = {
	type = character_event
	desc = "需要先存档，再重新读档，否则游戏会闪退！！！"
	option = {
		name = "移除地产"
		every_province = {
			if = {
				limit = {
					barony = {
						is_capital_barony = no					# 首府
					}
					barony.county.holder = {
						is_ai = yes
					}
					has_special_building = no					# 特殊建筑
					has_special_building_slot = no				# 特殊建筑槽
					has_holding = yes							# 地产
				}
				barony = {
					# change_title_holder						# 改变头衔持有人
					change_title_holder_include_vassals = {		# 改变头衔持有人and附庸
						holder = root
						change = scope:change
						change = scope:title_change
						take_baronies = yes
					}
					root = {
						#revoke_lease = yes						# 撤销租约
						#destroy_title = prev					# 销毁头衔
						get_title = prev						# 获得头衔
					}
				}
				remove_holding = yes
			}
		}
	}
	option = {
		name = "修改地产"
		every_province = {
			if = {
				limit = {
					has_holding = yes
					barony.county.holder = {
						is_ai = yes
					}
					not = {
						has_holding_type = city_holding	
					}
					# num_buildings > 1					# 地产默认占一个槽 
					# building_slots					# 总建筑槽数
					# free_building_slots				# 可用的建筑槽数
				}
				set_holding_type = city_holding
			}
			else_if = {
				limit = {
					has_holding = yes
					barony.county.holder = {
						is_ai = no
					}
					not = {
						has_holding_type = church_holding	
					}
				}
				set_holding_type = church_holding
			}
		}
	}
	option = {
		name = "创建地产"
		every_province = {
			if = {
				limit = {
					has_holding = no
					barony.county.holder = {
						is_ai = no
					}
				}
				set_holding_type = city_holding
			}
			# else_if = {
			# 	limit = {
			# 		# has_free_building_slot = yes			# 存在建筑槽
			# 		has_holding = no
			# 		barony.county.holder = {
			# 			is_ai = yes
			# 		}
			# 		or = {
			# 			has_special_building = true
			# 			has_special_building_slot = true
			# 		}
			# 	}
			# 	set_holding_type = city_holding
			# }
		}
	}
	option = {
		name = "移除建筑"
		every_province = {
			if = {
				limit = {
					has_holding_type = city_holding			# 城市地产
					num_buildings > 1
					barony.county.holder = {
						is_ai = yes
					}
				}
				set_holding_type = none
				set_holding_type = city_holding
			}
			else_if = {
				limit = {
					has_holding_type = castle_holding		# 城堡地产
					num_buildings > 1
					barony.county.holder = {
						is_ai = yes
					}
				}
				set_holding_type = none
				set_holding_type = castle_holding
			}
			else_if = {
				limit = {
					has_holding_type = church_holding   	# 神庙地产
					num_buildings > 1
					barony.county.holder = {
						is_ai = yes
					}
				}
				set_holding_type = none
				set_holding_type = church_holding
			}
			else_if = {
				limit = {
					has_holding_type = tribal_holding   	# 部落地产
					num_buildings > 1
					barony.county.holder = {
						is_ai = yes
					}
				}
				set_holding_type = none
				set_holding_type = tribal_holding
			}
		}
	}
	option = {
		name = "领地修正"
		every_county = {
			if = {
				limit = {
					holder = {
						is_ai = yes
					}
					not = {
						has_county_modifier = 主的阻挠
					}
				}
				add_county_modifier = 主的阻挠
			}
			else_if = {
				limit = {
					holder = {
						is_ai = no
					}
					has_county_modifier = 主的阻挠
				}
				remove_county_modifier = 主的阻挠
			}
		}
	}
	option = {
		name = "移除我的建筑"
		every_province = {
			if = {
				limit = {
					has_holding_type = church_holding   	# 神庙地产
					num_buildings > 1
					barony.county.holder = {
						is_ai = no
					}
				}
				set_holding_type = none
				set_holding_type = church_holding
			}
		}
	}
	option = {
		name = "退出"
	}
}

my_events.5 = {
	type = letter_event

	sender = {
		character = scope:recipient
		animation = personality_coward
	}
	immediate = {
		show_as_tooltip = {
			scope:target = {
				end_war = white_peace
			}
		}
		hidden_effect = {
			save_scope_as = war_ender
			send_interface_toast = {
				title = vassal_interaction.war_ender_gives_up
				scope:target = {
					end_war = white_peace
				}
			}
		}
	}
	option = {
		add_opinion = {
			target = scope:recipient
			modifier = pleased_opinion
			opinion = low_positive_opinion
		}
	}
}

my_events.6 = {
	type = character_event

	# option = {
	# 	name = "贷款"
	# 	dynasty = {
	# 		if = {
	# 			limit = {
	# 				has_variable = my_loan_count_variable
	# 			}
	# 			change_variable = { name = my_loan_count_variable add = 1 }
	# 		}
	# 		else = {
	# 			set_variable = { name = my_loan_count_variable value = 1 }
	# 		}
	# 	}
	# 	add_gold = 10000
	# }
	# option = {
	# 	name = "还款"
	# 	if = {
	# 		limit = {
	# 			dynasty = {
	# 				var:my_loan_count_variable > 0
	# 			}
	# 			gold > 15000
	# 		}
	# 		dynasty = {
	# 			change_variable = { name = my_loan_count_variable add = -1 }
	# 		}
	# 		add_gold = -15000
	# 	}
	# }
	option = {
		name = "金钱 >> 宗族威望"
		if = {
			limit = {
				gold > 1000000
			}
			add_gold = -1000000
			dynasty = {
				add_dynasty_prestige = 10000
			}
		}
		else_if = {
			limit = {
				gold > 100000
			}
			add_gold = -100000
			dynasty = {
				add_dynasty_prestige = 1000
			}
		}
		else_if = {
			limit = {
				gold > 10000
			}
			add_gold = -10000
			dynasty = {
				add_dynasty_prestige = 100
			}
		}
		else_if = {
			limit = {
				gold > 1000
			}
			add_gold = -1000
			dynasty = {
				add_dynasty_prestige = 10
			}
		}
		else_if = {
			limit = {
				gold > 100
			}
			add_gold = -100
			dynasty = {
				add_dynasty_prestige = 1
			}
		}
	}
	option = {
		name = "威望 >> 宗族威望"
		if = {
			limit = {
				prestige > 1000000
			}
			add_prestige = -1000000
			dynasty = {
				add_dynasty_prestige = 5000
			}
		}
		else_if = {
			limit = {
				prestige > 100000
			}
			add_prestige = -100000
			dynasty = {
				add_dynasty_prestige = 500
			}
		}
		else_if = {
			limit = {
				prestige > 10000
			}
			add_prestige = -10000
			dynasty = {
				add_dynasty_prestige = 50
			}
		}
		else_if = {
			limit = {
				prestige > 1000
			}
			add_prestige = -1000
			dynasty = {
				add_dynasty_prestige = 5
			}
		}
	}
	option = {
		name = "虔诚 >> 宗族威望"
		if = {
			limit = {
				piety > 1000000
			}
			add_piety = -1000000
			dynasty = {
				add_dynasty_prestige = 5000
			}
		}
		else_if = {
			limit = {
				piety > 100000
			}
			add_piety = -100000
			dynasty = {
				add_dynasty_prestige = 500
			}
		}
		else_if = {
			limit = {
				piety > 10000
			}
			add_piety = -10000
			dynasty = {
				add_dynasty_prestige = 50
			}
		}
		else_if = {
			limit = {
				piety > 1000
			}
			add_piety = -1000
			dynasty = {
				add_dynasty_prestige = 5
			}
		}
	}
	option = {
		name = "退出"
	}
}